<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="data" default-access="field" default-lazy="false">
    <class name="Article" table="ARTICLE">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <property name="code" column="CODE" length="32"/>
        <property name="label" column="LABEL" length="250"/>
        <property name="price" column="PRICE"/>
        <property name="keyCode" column="KEY_CODE"/>
        <property name="keyModifiers" column="KEY_MODIFIERS"/>
        <many-to-one name="category" column="CATEGORY_ID" insert="false" update="false"/>
    </class>

    <class name="ArticleCategory" table="ARTICLE_CATEGORY">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <property name="name" column="NAME" length="250"/>
        <many-to-one name="parent" column="PARENT_ID" insert="false" update="false"/>
        <set name="subCategories" lazy="true" cascade="all,delete-orphan">
            <key column="PARENT_ID"/>
            <one-to-many class="ArticleCategory"/>
        </set>
        <set name="articles" lazy="true" cascade="all,delete-orphan">
            <key column="CATEGORY_ID"/>
            <one-to-many class="Article"/>
        </set>
    </class>

    <class name="Customer" table="CUSTOMER">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <property name="titlePerson" column="TITLE" length="32"/>
        <property name="company" column="COMPANY" length="250"/>
        <property name="lastName" column="LASTNAME" length="64"/>
        <property name="firstName" column="FIRSTNAME" length="64"/>
        <property name="address1" column="ADDRESS1" length="250"/>
        <property name="address2" column="ADDRESS2" length="250"/>
        <property name="zip" column="ZIP" length="32"/>
        <property name="city" column="CITY" length="64"/>
        <property name="state" column="STATE" length="64"/>
        <property name="country" column="COUNTRY" length="64"/>
        <property name="telephone" column="TELEPHONE" length="64"/>
        <property name="mobile" column="MOBILE" length="64"/>
        <property name="fax" column="FAX" length="64"/>
        <property name="email" column="EMAIL" length="250"/>
        <set name="invoices" lazy="true" inverse="true">
            <key column="CUSTOMER_ID"/>
            <one-to-many class="Invoice"/>
        </set>
    </class>

    <class name="Hotel" table="HOTEL">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <property name="rate" column="RATING" length="32"/>
        <property name="chain" column="CHAIN" length="64"/>
        <property name="name" column="NAME" length="250"/>
        <property name="address1" column="ADDRESS1" length="250"/>
        <property name="address2" column="ADDRESS2" length="250"/>
        <property name="zip" column="ZIP" length="32"/>
        <property name="city" column="CITY" length="64"/>
        <property name="state" column="STATE" length="64"/>
        <property name="country" column="COUNTRY" length="64"/>
        <property name="telephone" column="TELEPHONE" length="64"/>
        <property name="fax" column="FAX" length="64"/>
        <property name="email" column="EMAIL" length="250"/>
        <property name="web" column="WEB" length="250"/>
        <property name="logoBytes" column="LOGO" type="blob"/>
        <map name="rooms" lazy="true" cascade="all-delete-orphan">
            <key column="HOTEL_ID"/>
            <map-key column="NUMBER" type="int" />
            <one-to-many class="Room"/>
        </map>
    </class>

    <class name="Invoice" table="INVOICE">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <property name="dateCreated" column="CREATION_DATE" type="date"/>
        <many-to-one name="customer" column="CUSTOMER_ID"/>
        <many-to-one name="hotel" column="HOTEL_ID"/>
        <list name="items" lazy="true" cascade="all,delete-orphan">
            <key column="INVOICE_ID"/>
            <list-index column="POS"/>
            <one-to-many class="InvoiceItem"/>
        </list>
        <list name="reservations" lazy="true" cascade="all,delete-orphan">
            <key column="INVOICE_ID"/>
            <list-index column="POS"/>
            <one-to-many class="Reservation"/>
        </list>
    </class>

    <class name="InvoiceItem" table="INVOICE_ITEM">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <property name="price" column="PRICE"/>
        <property name="quantity" column="QUANTITY"/>
        <many-to-one name="invoice" column="INVOICE_ID"
                insert="false" update="false" lazy="false"/>
        <many-to-one name="article" column="ARTICLE_ID"/>
    </class>

    <class name="Period" table="PERIOD">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <property name="fromDate" column="FROM_DATE" type="date"/>
        <property name="toDate" column="TO_DATE" type="date"/>
        <many-to-one name="tariff" column="TARIFF_ID"/>
    </class>

    <class name="Reservation" table="RESERVATION">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <property name="fromDate" column="FROM_DATE" type="date"/>
        <property name="toDate" column="TO_DATE" type="date"/>
        <property name="status" column="STATUS"/>
        <many-to-one name="invoice" column="INVOICE_ID" 
                insert="false" update="false" lazy="false"/>
        <many-to-one name="room" column="ROOM_ID"/>
    </class>

    <class name="Room" table="ROOM">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <many-to-one name="hotel" column="HOTEL_ID"/>
        <property name="number" column="NUMBER" insert="false" update="false"/>
        <many-to-one name="type" column="TYPE_ID"/>
    </class>

    <class name="RoomType" table="ROOM_TYPE">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <property name="name" column="NAME" length="250"/>
        <property name="description" column="DESCRIPTION" type="text"/>
        <property name="basePrice" column="BASE_PRICE"/>
        <set name="rooms" lazy="true">
            <key column="TYPE_ID"/>
            <one-to-many class="Room"/>
        </set>
    </class>

    <class name="Tariff" table="TARIFF">
        <id name="id" column="ID" type="int">
            <generator class="native"/>
        </id>
        <property name="name" column="NAME" length="250"/>
        <property name="factor" column="FACTOR"/>
        <property name="intColor" column="COLOR" access="property"/>
        <set name="periods" lazy="false">
            <key column="TARIFF_ID"/>
            <one-to-many class="Period"/>
        </set>
    </class>
</hibernate-mapping>
